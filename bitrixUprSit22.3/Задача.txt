Задача.
Запрограммировать кастомный компонент "Обратная связь".
писать на class.php , D7
Обязательные параметры компонента:
почтовый шаблон
инфоблок, куда сохраняются заявки
галочка "использовать Google Re-captcha"
для демонстрации работы создать отдельное почтовое событие с шаблоном и создать инфоблок со свойствами:
UF_FEEDBACK_FIO
UF_FEEDBACK_PHONE
UF_FEEDBACK_MESSAGE

Принцип работы:
в шаблоне компонента могут быть произвольные поля:
input.text, textatea, select, checkbox верстка произвольная, как будто нам просто дали шаблон от верстальщика (т.е. в шаблоне нет никаких циклов вывода полей из конфигов и прочего, как есть в верстке так и есть)

При отправке формы:
при галочке "re-captcha" проверяем re-captcha2 (флажок)
создается элемент того типа инфоблока, который указан в параметрах
если в названии поля есть префикс: UF_FEEDBACK_, то эти поля сохраняются в свойствах нового элемента и отправляются в письме, другие игнорируются (см. ниже).
Например, у нас в форме в шаблоне есть поля
Имя: UF_FEEDBACK_FIO
Телефон: UF_FEEDBACK_PHONE
Сообщение: UF_FEEDBACK_MESSAGE
Дополнительно: UF_INFO
Дополнительно2: UF_FEEDBACK_INFO

поле UF_INFO на почту не отправляется, в элемент не сохраняется.
поле UF_FEEDBACK_INFO в почтовый шаблон отправляется, но понятно, что если оно там не прописано, то на почту не приходит, НО в элемент не сохраняется - так как такого свойства для него в инфоблоке не создано
